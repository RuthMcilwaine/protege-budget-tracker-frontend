(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,a){e.exports=a(65)},41:function(e,t,a){},43:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(33),i=a.n(o),l=(a(41),a(13)),c=a.n(l),s=a(15),p=a(1),u=a(2),d=a(4),m=a(3),g=a(5),h=(a(43),a(7)),f=a(14),E=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",null,r.a.createElement("div",null,r.a.createElement(h.b,{to:"/",className:"Nav__brand"}),r.a.createElement("div",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(h.b,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(h.b,{to:"/add"},"Add a new protege"))))))}}]),t}(r.a.Component),b=a(11),v=a.n(b),w=function(e){return e.reduce(function(e,t){return e+t.expenditure},0)},C=function(e){var t=e.protege,a=t.protege,n=t.items;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Name: ",a.protegename),r.a.createElement("p",null,"Email: ",a.protegeemail),r.a.createElement("h2",null,"Items purchased: ",function(e){return e.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("ul",null,r.a.createElement("li",null," ",e.description," | $ ",e.expenditure),r.a.createElement(h.b,{to:{pathname:"/edit",state:{item:e}}},"Edit"),r.a.createElement("br",null),r.a.createElement(h.b,{to:{pathname:"/delete",state:{item:e}}},"Delete Item")))})}(n)),r.a.createElement("h2",null,"Total spent: ",w(n)),r.a.createElement("h2",null,"Balance: ",1e3-w(n)),function(e,t){return w(t)>=1e3?r.a.createElement("p",null,"Protege has reached their limit"):r.a.createElement("p",null,r.a.createElement(h.b,{to:{pathname:"/create/".concat(e._id)}},"Add Item"))}(a,n),r.a.createElement(h.b,{to:{pathname:"/editprotege/".concat(a._id)}},"Edit protege details"),r.a.createElement("p",null),r.a.createElement("button",{type:"submit",onClick:function(e){window.confirm("Are you sure you want to delete")&&function(e,t,a){if(e.preventDefault(),console.log(t),console.log(a),0!==a.length)return window.alert("Please delete all items before you delete the protege");v.a.delete("".concat("https://protege-budget-tracker.ruthmcilwaine.now.sh","/proteges/").concat(t._id)).then(function(e){console.log(e),200===e.status&&(window.location="/")})}(e,a,n)}},"Delete protege"))},y=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={protege:null},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(c.a.mark(function e(){var t,a,n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,a="".concat("https://protege-budget-tracker.ruthmcilwaine.now.sh","/proteges/").concat(t),e.next=4,fetch(a);case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,this.setState({protege:r});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.protege;return e?r.a.createElement(C,{protege:e}):null}}]),t}(r.a.Component),k=a(16),j=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={protegeId:a.props.match.params.id,description:"",date:new Date,errorMessages:[]},a.handleCancel=function(e){window.location="/proteges/".concat(a.props.match.params.id)},a.onChange=function(e){a.setState(Object(k.a)({},e.target.id,e.target.value))},a.onSubmit=function(e){e.preventDefault();var t={protegeId:a.state.protegeId,description:a.state.description,expenditure:a.state.expenditure,date:a.state.date};console.log(t),v.a.post("".concat("https://protege-budget-tracker.ruthmcilwaine.now.sh","/items/add"),t).then(function(e){console.log(e.data),window.location="/proteges/".concat(a.props.match.params.id)}).catch(function(e){a.setState({errorMessages:e.response.data.messages})})},a.displayErrors=function(e){return e.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,e))})},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.errorMessages;return console.log(e),r.a.createElement("div",null,r.a.createElement("h3",null,"Create New Item "),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Description: "),r.a.createElement("input",{type:"text",id:"description",className:"form-control",value:this.state.description,onChange:this.onChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Expenditure: "),r.a.createElement("input",{type:"number",id:"expenditure",className:"form-control",value:this.state.expenditure,onChange:this.onChange})),r.a.createElement("button",{onClick:this.handleClick},"Save"),r.a.createElement("button",{onClick:this.handleCancel},"Cancel")),r.a.createElement("div",null,r.a.createElement("p",null,this.displayErrors(e))))}}]),t}(n.Component),O=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={description:"",expenditure:"",adding:!0,errorMessages:[]},a.handleCancel=function(e){e.preventDefault(),window.location="/proteges/".concat(a.props.location.state.item.protege_id)},a.onChangeDescription=function(e){a.setState({description:e.target.value})},a.onChangeExpenditure=function(e){a.setState({expenditure:e.target.value})},a.handleClick=function(e){e.preventDefault();var t={description:a.state.description,expenditure:a.state.expenditure,itemId:a.state.itemId,protegeId:a.state.protegeId};console.log("edit"),console.log(t),v.a.patch("".concat("https://protege-budget-tracker.ruthmcilwaine.now.sh","/items/update/").concat(t.itemId),t).then(function(e){console.log(e.data),window.location="/proteges/".concat(a.props.location.state.item.protege_id)}).catch(function(e){a.setState({errorMessages:e.response.data.messages})})},a.displayErrors=function(e){return e.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,e))})},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.setState({description:this.props.location.state.item.description,expenditure:this.props.location.state.item.expenditure,itemId:this.props.location.state.item._id,protegeId:this.props.location.state.item.protege_id}),console.log(this.props.location.state.item)}},{key:"render",value:function(){var e=this.state.errorMessages;return!0===this.state.adding?r.a.createElement("div",null,r.a.createElement("h3",null,"Edit Item "),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Description: "),r.a.createElement("input",{type:"text",required:!0,className:"form-control",value:this.state.description,onChange:this.onChangeDescription})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Expenditure: "),r.a.createElement("input",{type:"number",required:!0,className:"form-control",value:this.state.expenditure,onChange:this.onChangeExpenditure})),r.a.createElement("button",{onClick:this.handleClick},"Update"),r.a.createElement("button",{onClick:this.handleCancel},"Cancel")),r.a.createElement("div",null,r.a.createElement("p",null,this.displayErrors(e)))):r.a.createElement(f.a,{to:"/"})}}]),t}(n.Component),x=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={description:"",expenditure:"",adding:!0},a.handleCancel=function(e){e.preventDefault(),window.location="/proteges/".concat(a.props.location.state.item.protege_id)},a.handleClick=function(e){e.preventDefault();var t={description:a.state.description,expenditure:a.state.expenditure,itemId:a.state.itemId,protegeId:a.state.protegeId};console.log("edit"),console.log(t),v.a.delete("".concat("https://protege-budget-tracker.ruthmcilwaine.now.sh","/items/").concat(t.itemId),t).then(function(e){return console.log(e.data)}),window.location="/proteges/".concat(a.state.protegeId)},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.setState({description:this.props.location.state.item.description,expenditure:this.props.location.state.item.expenditure,itemId:this.props.location.state.item._id,protegeId:this.props.location.state.item.protege_id}),console.log(this.props.location.state.item)}},{key:"render",value:function(){return!0===this.state.adding?r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null," Are you sure you want to delete?"),r.a.createElement("button",{onClick:this.handleClick},"Delete"),r.a.createElement("button",{onClick:this.handleCancel},"Cancel")):r.a.createElement(f.a,{to:"/"})}}]),t}(n.Component),D=function(e){return e.reduce(function(e,t){return e+t.expenditure},0)},M=function(e){return function(e){return e.map(function(e,t){return r.a.createElement("div",{className:"protegelist",key:t},r.a.createElement("h2",null,e.protege.protegename),r.a.createElement("ul",null,r.a.createElement("li",null,"Email: ",e.protege.protegeemail),r.a.createElement("li",null,"Expenditure: ",D(e.items)),r.a.createElement("li",null,"Balance: ",1e3-D(e.items)),r.a.createElement("li",null,r.a.createElement(h.b,{to:"/proteges/"+e.protege._id},"View/edit"))))})}(e.proteges)},S=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={protegename:"",protegeemail:"",expenditure:"",balance:1e3,addingUser:!0},a.handleClick=function(e){e.preventDefault();var t={protegename:a.state.protegename,protegeemail:a.state.protegeemail,expenditure:a.state.expenditure,balance:a.state.balance};a.props.addProtege(t)},a.handleCancel=function(e){e.preventDefault(),window.location="/"},a.handleChange=function(e){a.setState(Object(k.a)({},e.target.id,e.target.value))},a.displayErrors=function(e){return e.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,e))})},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.errorMessages;return console.log(e),this.props.addingUser?r.a.createElement("div",null,r.a.createElement("h1",null,"Protege form"),r.a.createElement("form",{onSubmit:this.handleClick},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"protegename"},"Protege name"),r.a.createElement("input",{onChange:this.handleChange,type:"text",required:!0,className:"form-control",id:"protegename",placeholder:"protege name",value:this.state.protegename}),r.a.createElement("label",{htmlFor:"protegeemail"},"Email"),r.a.createElement("input",{onChange:this.handleChange,type:"text",required:!0,className:"form-control",id:"protegeemail",placeholder:"email",value:this.state.protegeemail}),r.a.createElement("button",{onClick:this.handleClick},"Save"),r.a.createElement("button",{onClick:this.handleCancel},"Cancel"))),r.a.createElement("div",null,r.a.createElement("p",null,this.displayErrors(e)))):r.a.createElement(f.a,{to:"/"})}}]),t}(n.Component),I=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={protegename:"",protegeemail:"",editing:!0,filledForm:!1},a.handleCancel=function(e){e.preventDefault(),window.location="/proteges/".concat(a.props.match.params.id)},a.onChange=function(e){a.setState(Object(k.a)({},e.target.id,e.target.value))},a.handleClick=function(e){e.preventDefault(),a.props.updateProtege(a.state.protegename,a.state.protegeemail,a.props.match.params.id)},a.displayErrors=function(e){return e.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,e))})},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(c.a.mark(function e(){var t,a,n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,console.log(t),a="".concat("https://protege-budget-tracker.ruthmcilwaine.now.sh","/proteges/").concat(t),e.next=5,fetch(a);case 5:return n=e.sent,e.next=8,n.json();case 8:r=e.sent,console.log(r),this.setState({formFilled:!0,protegename:r.protege.protegename,protegeemail:r.protege.protegeemail});case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.errorMessages,t=this.state.formFilled;return console.log(this.props),t?this.props.updatingDone?r.a.createElement(f.a,{to:{pathname:"/proteges/".concat(this.props.match.params.id)}}):r.a.createElement("div",null,r.a.createElement("h3",null,"Edit Protege"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Name: "),r.a.createElement("input",{type:"text",required:!0,id:"protegename",className:"form-control",value:this.state.protegename,onChange:this.onChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email: "),r.a.createElement("input",{type:"text",required:!0,id:"protegeemail",className:"form-control",value:this.state.protegeemail,onChange:this.onChange})),r.a.createElement("button",{onClick:this.handleClick},"Update"),r.a.createElement("button",{onClick:this.handleCancel},"Cancel")),r.a.createElement("div",null,r.a.createElement("p",null,this.displayErrors(e)))):null}}]),t}(n.Component),N=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.proteges;return r.a.createElement(h.a,null,r.a.createElement(E,null),r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/proteges/:id",component:y}),r.a.createElement(f.b,{path:"/add",render:function(){return r.a.createElement(S,{addProtege:e.props.addProtege,addingUser:e.props.addingUser,errorMessages:e.props.errorMessages})}}),r.a.createElement(f.b,{path:"/editprotege/:id",render:function(t){return r.a.createElement(I,Object.assign({updateProtege:e.props.updateProtege,updatingDone:e.props.updatingDone,errorMessages:e.props.errorMessages},t))}}),r.a.createElement(f.b,{path:"/create/:id",component:j}),r.a.createElement(f.b,{path:"/edit/",component:O}),r.a.createElement(f.b,{path:"/delete/",component:x}),r.a.createElement(f.b,{exact:!0,path:"/",render:function(){return r.a.createElement(M,{proteges:t})}})))}}]),t}(r.a.Component),P=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={addingUser:!0,updatingDone:null,errorMessages:[]},a.updateProtege=function(e,t,n){var r={protegename:e,protegeemail:t};v.a.patch("".concat("https://protege-budget-tracker.ruthmcilwaine.now.sh","/proteges/update/").concat(n),r).then(function(e){console.log(e),a.setState({updatingDone:!0,proteges:e.data.proteges}),a.clearErrorMessages()}).catch(function(e){a.errorMessages(e)})},a.addProtege=function(e){var t={protegename:e.protegename,protegeemail:e.protegeemail,expenditure:e.expenditure,balance:e.balance};v.a.post("".concat("https://protege-budget-tracker.ruthmcilwaine.now.sh","/proteges/add"),t).then(function(e){var t,n=a.state.proteges,r={items:[],protege:e.data};(t=n).push(r),a.setState({proteges:t,addingUser:!1}),a.clearErrorMessages()}).catch(function(e){a.errorMessages(e)})},a.errorMessages=function(e){a.setState({errorMessages:e.response.data.messages})},a.clearErrorMessages=function(){a.setState({errorMessages:[]})},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(c.a.mark(function e(){var t,a,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("production"),t="".concat("https://protege-budget-tracker.ruthmcilwaine.now.sh","/proteges"),e.next=4,fetch(t);case 4:return a=e.sent,console.log(a),e.next=8,a.json();case 8:n=e.sent,this.setState({proteges:n,addingUser:!0});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){t.addingUser!==this.state.addingUser&&this.setState({addingUser:!0}),t.updatingDone!==this.state.updatingDone&&this.setState({updatingDone:!1})}},{key:"render",value:function(){var e=this.state,t=e.proteges,a=e.addingUser;return t?r.a.createElement(N,{proteges:t,errorMessages:this.state.errorMessages,addProtege:this.addProtege,addingUser:a,updateProtege:this.updateProtege,updatingDone:this.state.updatingDone}):null}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[36,1,2]]]);
//# sourceMappingURL=main.8a765bba.chunk.js.map