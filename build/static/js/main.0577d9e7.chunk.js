(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,a){},54:function(e,t,a){e.exports=a(88)},59:function(e,t,a){},60:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},85:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(48),c=a.n(o),l=(a(59),a(27)),s=a.n(l),i=a(29),m=a(21),p=a(22),u=a(25),d=a(23),h=a(26),g=(a(60),a(6)),f=a(18),E=a(10),b=a(11),v=a(13),N=a(12),w=a(14),C=a(89),y=a(90),k=a(91),j=a(92),x=a(93),O=function(e){function t(){return Object(E.a)(this,t),Object(v.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement(C.a,{color:"light",light:!0},r.a.createElement(y.a,{href:"#"},r.a.createElement("img",{src:"%PUBLIC_URL%/MYOB_logo_RGB.jpg",alt:""})),r.a.createElement(k.a,null,r.a.createElement(j.a,null,r.a.createElement(x.a,{href:"/"},"Home")),r.a.createElement(j.a,null,r.a.createElement(x.a,{href:"/add"},"Add Protege"))))}}]),t}(r.a.Component),D=a(16),M=a.n(D),S=(a(79),a(80),a(20)),I=a(17),P=function(e){return e.reduce(function(e,t){return e+t.expenditure},0)},U=function(e){var t=e.protege,a=t.protege,n=t.items;return r.a.createElement("div",{className:"list1"},r.a.createElement("p",null,"Name: ",a.protegename),r.a.createElement("p",null,"Email: ",a.protegeemail),r.a.createElement("p",null,"Items purchased: ",function(e){return e.map(function(e,t){return r.a.createElement("div",{className:"List"},r.a.createElement("div",{key:t},r.a.createElement("ul",null,r.a.createElement("li",null,e.description," | $ ",e.expenditure),r.a.createElement(g.b,{to:{pathname:"/edit",state:{item:e}}},r.a.createElement("button",{className:"button1"},"Edit Item ",r.a.createElement(S.a,{icon:I.b,"background-color":"purple"}))),r.a.createElement(g.b,{to:{pathname:"/delete",state:{item:e}}},r.a.createElement("button",{className:"button1"},"Delete Item ",r.a.createElement(S.a,{icon:I.d}))))))})}(n)),r.a.createElement("p",null,"Total spent: ",P(n)),r.a.createElement("p",null,"Balance: ",1e3-P(n)),function(e,t){return P(t)>=1e3?r.a.createElement("p",null,"Protege has reached their limit"):r.a.createElement("p",null,r.a.createElement(g.b,{to:{pathname:"/create/".concat(e._id)}},r.a.createElement("button",{className:"button1"},"Add Item ",r.a.createElement(S.a,{icon:I.c}))))}(a,n),r.a.createElement(g.b,{to:{pathname:"/"}},r.a.createElement("button",{className:"button1"},r.a.createElement(S.a,{icon:I.a})," Back")),r.a.createElement(g.b,{to:{pathname:"/editprotege/".concat(a._id)}},r.a.createElement("button",{className:"button1"},"Edit protege details ",r.a.createElement(S.a,{icon:I.e}))),r.a.createElement("button",{className:"button1",type:"submit",onClick:function(e){window.confirm("Are you sure you want to delete protege")&&function(e,t,a){if(e.preventDefault(),console.log(t),console.log(a),0!==a.length)return window.alert("Please delete all items before you delete the protege");M.a.delete("".concat("https://protege-budget-tracker.ruthmcilwaine.now.sh","/proteges/").concat(t._id)).then(function(e){console.log(e),200===e.status&&(window.location="/")})}(e,a,n)}},"Delete Protege ",r.a.createElement(S.a,{icon:I.d})))},_=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={protege:null},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(s.a.mark(function e(){var t,a,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,a="".concat("https://protege-budget-tracker.ruthmcilwaine.now.sh","/proteges/").concat(t),e.next=4,fetch(a);case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,this.setState({protege:r});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.protege;return e?r.a.createElement(U,{protege:e}):null}}]),t}(r.a.Component),A=a(24),B=(a(28),function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(v.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(o)))).state={protegeId:a.props.match.params.id,description:"",date:new Date,errorMessages:[]},a.handleCancel=function(e){window.location="/proteges/".concat(a.props.match.params.id)},a.onChange=function(e){a.setState(Object(A.a)({},e.target.id,e.target.value))},a.onSubmit=function(e){e.preventDefault();var t={protegeId:a.state.protegeId,description:a.state.description,expenditure:a.state.expenditure,date:a.state.date};console.log(t),M.a.post("".concat("https://protege-budget-tracker.ruthmcilwaine.now.sh","/items/add"),t).then(function(e){console.log(e.data),window.location="/proteges/".concat(a.props.match.params.id)}).catch(function(e){a.setState({errorMessages:e.response.data.messages})})},a.displayErrors=function(e){return e.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,e))})},a}return Object(w.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.state.errorMessages;return console.log(e),r.a.createElement("div",{className:"form-box"},r.a.createElement("div",{className:"form-container-item"},r.a.createElement("div",{className:"form-header-box"},r.a.createElement("h2",{className:"form-header"},"Register a purchase")),r.a.createElement("form",{className:"form",onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label"},"Description "),r.a.createElement("input",{type:"text",id:"description",className:"form-control",value:this.state.description,onChange:this.onChange,placeholder:"description of purchase"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label"},"Expenditure "),r.a.createElement("div",{class:"input-icon"},r.a.createElement("input",{type:"number",id:"expenditure",className:"form-control",value:this.state.expenditure,onChange:this.onChange,placeholder:"price"}),r.a.createElement("i",null,"$"))),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{className:"purple-button-form",onClick:this.handleClick},"Save"),r.a.createElement("button",{className:"pink-button-form",onClick:this.handleCancel},"Cancel"))),r.a.createElement("div",null,r.a.createElement("p",{className:"error-message"},this.displayErrors(e)))))}}]),t}(n.Component)),q=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(v.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(o)))).state={description:"",expenditure:"",adding:!0,errorMessages:[]},a.handleCancel=function(e){e.preventDefault(),window.location="/proteges/".concat(a.props.location.state.item.protege_id)},a.onChangeDescription=function(e){a.setState({description:e.target.value})},a.onChangeExpenditure=function(e){a.setState({expenditure:e.target.value})},a.handleClick=function(e){e.preventDefault();var t={description:a.state.description,expenditure:a.state.expenditure,itemId:a.state.itemId,protegeId:a.state.protegeId};console.log("edit"),console.log(t),M.a.patch("".concat("https://protege-budget-tracker.ruthmcilwaine.now.sh","/items/update/").concat(t.itemId),t).then(function(e){console.log(e.data),window.location="/proteges/".concat(a.props.location.state.item.protege_id)}).catch(function(e){a.setState({errorMessages:e.response.data.messages})})},a.displayErrors=function(e){return e.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,e))})},a}return Object(w.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.setState({description:this.props.location.state.item.description,expenditure:this.props.location.state.item.expenditure,itemId:this.props.location.state.item._id,protegeId:this.props.location.state.item.protege_id}),console.log(this.props.location.state.item)}},{key:"render",value:function(){var e=this.state.errorMessages;return!0===this.state.adding?r.a.createElement("div",null,r.a.createElement("div",{className:"form-box"},r.a.createElement("div",{className:"form-container-item"},r.a.createElement("div",{className:"form-header-box"},r.a.createElement("h2",{className:"form-header"},"Edit a purchase")),r.a.createElement("form",{className:"form",onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label"},"Description "),r.a.createElement("input",{type:"text",required:!0,className:"form-control",value:this.state.description,onChange:this.onChangeDescription})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label"},"Expenditure "),r.a.createElement("div",{class:"input-icon"},r.a.createElement("input",{type:"number",required:!0,className:"form-control",value:this.state.expenditure,onChange:this.onChangeExpenditure,placeholder:"price"}),r.a.createElement("i",null,"$"))),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{className:"purple-button-form",onClick:this.handleClick},"Update"),r.a.createElement("button",{className:"pink-button-form",onClick:this.handleCancel},"Cancel"))),r.a.createElement("div",null,r.a.createElement("p",{className:"error-message"},this.displayErrors(e)))))):r.a.createElement(f.a,{to:"/"})}}]),t}(n.Component),F=(a(85),function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(r)))).state={description:"",expenditure:"",adding:!0},a.handleCancel=function(e){e.preventDefault(),window.location="/proteges/".concat(a.props.location.state.item.protege_id)},a.handleClick=function(e){e.preventDefault();var t={description:a.state.description,expenditure:a.state.expenditure,itemId:a.state.itemId,protegeId:a.state.protegeId};console.log("edit"),console.log(t),M.a.delete("".concat("https://protege-budget-tracker.ruthmcilwaine.now.sh","/items/").concat(t.itemId),{data:t}).then(function(e){window.location="/proteges/".concat(a.state.protegeId)})},a}return Object(w.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.setState({description:this.props.location.state.item.description,expenditure:this.props.location.state.item.expenditure,itemId:this.props.location.state.item._id,protegeId:this.props.location.state.item.protege_id}),console.log(this.props.location.state.item)}},{key:"render",value:function(){return!0===this.state.adding?r.a.createElement("div",{className:"delete"},r.a.createElement("h3",null," Are you sure you want to delete?"),r.a.createElement("div",{className:"delete-button"},r.a.createElement("button",{className:"button2",onClick:this.handleClick},"Delete"),r.a.createElement("button",{className:"button1",onClick:this.handleCancel},"Cancel"))):r.a.createElement(f.a,{to:"/"})}}]),t}(n.Component)),R=a(94),$=a(95),L=function(e){return e.reduce(function(e,t){return e+t.expenditure},0)},J=function(e){return function(e){return r.a.createElement(R.a,null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement($.a,{bordered:!0,striped:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Protege Name"),r.a.createElement("th",null,"ProtegeEmail"),r.a.createElement("th",null,"Expenditure"),r.a.createElement("th",null,"Balance"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,e.map(function(e,t){return r.a.createElement("tr",null,r.a.createElement("td",null,e.protege.protegename),r.a.createElement("td",null,e.protege.protegeemail),r.a.createElement("td",null,L(e.items)),r.a.createElement("td",null,1e3-L(e.items)),r.a.createElement("td",null,r.a.createElement(g.b,{to:"/proteges/"+e.protege._id},r.a.createElement("button",{className:"button1"},"View/edit"))))}))))}(e.proteges)},W=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(v.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(o)))).state={protegename:"",protegeemail:"",expenditure:"",balance:1e3,addingUser:!0},a.handleClick=function(e){e.preventDefault();var t={protegename:a.state.protegename,protegeemail:a.state.protegeemail,expenditure:a.state.expenditure,balance:a.state.balance};a.props.addProtege(t)},a.handleCancel=function(e){e.preventDefault(),window.location="/"},a.handleChange=function(e){a.setState(Object(A.a)({},e.target.id,e.target.value))},a.displayErrors=function(e){return e.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,e))})},a}return Object(w.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props.errorMessages;return console.log(e),this.props.addingUser?r.a.createElement("div",{className:"form-box"},r.a.createElement("div",{className:"form-container-protege"},r.a.createElement("div",{className:"form-header-box"},r.a.createElement("h2",{className:"form-header"},"Register a protege")),r.a.createElement("form",{className:"form",onSubmit:this.handleClick},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"protegename"},"Protege name"),r.a.createElement("input",{className:"form-control",onChange:this.handleChange,type:"text",required:!0,id:"protegename",placeholder:"protege name",value:this.state.protegename})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"protegeemail"},"Email"),r.a.createElement("input",{className:"form-control",onChange:this.handleChange,type:"text",required:!0,id:"protegeemail",placeholder:"email",value:this.state.protegeemail})),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{className:"purple-button-form",onClick:this.handleClick},"Save"),r.a.createElement("button",{className:"pink-button-form",onClick:this.handleCancel},"Cancel"))),r.a.createElement("p",{className:"error-message"},this.displayErrors(e)," "))):r.a.createElement(f.a,{to:"/"})}}]),t}(n.Component),G=a(35),H=a.n(G),T=a(52),V=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(v.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(o)))).state={protegename:"",protegeemail:"",editing:!0,filledForm:!1},a.handleCancel=function(e){e.preventDefault(),window.location="/proteges/".concat(a.props.match.params.id)},a.onChange=function(e){a.setState(Object(A.a)({},e.target.id,e.target.value))},a.handleClick=function(e){e.preventDefault(),a.props.updateProtege(a.state.protegename,a.state.protegeemail,a.props.match.params.id)},a.displayErrors=function(e){return e.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,e))})},a}return Object(w.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=Object(T.a)(H.a.mark(function e(){var t,a,n,r;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,console.log(t),a="".concat("https://protege-budget-tracker.ruthmcilwaine.now.sh","/proteges/").concat(t),e.next=5,fetch(a);case 5:return n=e.sent,e.next=8,n.json();case 8:r=e.sent,console.log(r),this.setState({formFilled:!0,protegename:r.protege.protegename,protegeemail:r.protege.protegeemail});case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.errorMessages,t=this.state.formFilled;return console.log(this.props),t?this.props.updatingDone?r.a.createElement(f.a,{to:{pathname:"/proteges/".concat(this.props.match.params.id)}}):r.a.createElement("div",{className:"form-box"},r.a.createElement("div",{className:"form-container-protege"},r.a.createElement("div",{className:"form-header-box"},r.a.createElement("h2",{className:"form-header"},"Edit protege details")),r.a.createElement("form",{className:"form",onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label"},"Protege name "),r.a.createElement("input",{type:"text",required:!0,id:"protegename",className:"form-control",value:this.state.protegename,onChange:this.onChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label"},"Email "),r.a.createElement("input",{type:"text",required:!0,id:"protegeemail",className:"form-control",value:this.state.protegeemail,onChange:this.onChange})),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{className:"purple-button-form",onClick:this.handleClick},"Update"),r.a.createElement("button",{className:"pink-button-form",onClick:this.handleCancel},"Cancel"))),r.a.createElement("div",null,r.a.createElement("p",{className:"error-message"},this.displayErrors(e))))):null}}]),t}(n.Component),Y=function(e){function t(){return Object(m.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.proteges;return r.a.createElement(g.a,null,r.a.createElement(O,null),r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/proteges/:id",component:_}),r.a.createElement(f.b,{path:"/add",render:function(){return r.a.createElement(W,{addProtege:e.props.addProtege,addingUser:e.props.addingUser,errorMessages:e.props.errorMessages})}}),r.a.createElement(f.b,{path:"/editprotege/:id",render:function(t){return r.a.createElement(V,Object.assign({updateProtege:e.props.updateProtege,updatingDone:e.props.updatingDone,errorMessages:e.props.errorMessages},t))}}),r.a.createElement(f.b,{path:"/create/:id",component:B}),r.a.createElement(f.b,{path:"/edit/",component:q}),r.a.createElement(f.b,{path:"/delete/",component:F}),r.a.createElement(f.b,{exact:!0,path:"/",render:function(){return r.a.createElement(J,{proteges:t})}})))}}]),t}(r.a.Component),z=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={addingUser:!0,updatingDone:null,errorMessages:[]},a.updateProtege=function(e,t,n){var r={protegename:e,protegeemail:t};M.a.patch("".concat("https://protege-budget-tracker.ruthmcilwaine.now.sh","/proteges/update/").concat(n),r).then(function(e){console.log(e),a.setState({updatingDone:!0,proteges:e.data.proteges}),a.clearErrorMessages()}).catch(function(e){a.errorMessages(e)})},a.addProtege=function(e){var t={protegename:e.protegename,protegeemail:e.protegeemail,expenditure:e.expenditure,balance:e.balance};M.a.post("".concat("https://protege-budget-tracker.ruthmcilwaine.now.sh","/proteges/add"),t).then(function(e){var t,n=a.state.proteges,r={items:[],protege:e.data};(t=n).push(r),a.setState({proteges:t,addingUser:!1}),a.clearErrorMessages()}).catch(function(e){a.errorMessages(e)})},a.errorMessages=function(e){a.setState({errorMessages:e.response.data.messages})},a.clearErrorMessages=function(){a.setState({errorMessages:[]})},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(s.a.mark(function e(){var t,a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("production"),t="".concat("https://protege-budget-tracker.ruthmcilwaine.now.sh","/proteges"),e.next=4,fetch(t);case 4:return a=e.sent,console.log(a),e.next=8,a.json();case 8:n=e.sent,this.setState({proteges:n,addingUser:!0});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){t.addingUser!==this.state.addingUser&&this.setState({addingUser:!0}),t.updatingDone!==this.state.updatingDone&&this.setState({updatingDone:!1})}},{key:"render",value:function(){var e=this.state,t=e.proteges,a=e.addingUser;return t?r.a.createElement(Y,{proteges:t,errorMessages:this.state.errorMessages,addProtege:this.addProtege,addingUser:a,updateProtege:this.updateProtege,updatingDone:this.state.updatingDone}):null}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(86),a(87);c.a.render(r.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[54,1,2]]]);
//# sourceMappingURL=main.0577d9e7.chunk.js.map